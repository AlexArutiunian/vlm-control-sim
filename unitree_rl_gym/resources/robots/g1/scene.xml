<mujoco model="g1 scene">
  <!-- Робот -->
  <include file="g1_43dof.xml"/>

  <!-- Камера/масштаб сцены -->
  <statistic center="1.0 0.7 1.0" extent="0.8"/>

  <!-- Визуальные настройки + отключение теней -->
  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.25 0.25 0.25" specular="0 0 0"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="-140" elevation="-20"/>
    <map shadowclip="40" znear="0.01" zfar="200"/>
    <quality shadowsize="0"/>
  </visual>

  <!-- Defaults для стола (визуал/коллизии) -->
 <default>
  <default class="prop_table">
    <default class="prop_visual">
      <geom type="mesh" contype="0" conaffinity="0" group="2" euler="1.5708 0 0"/>
    </default>
    <default class="prop_collision">
      <!-- ВАЖНО: conaffinity=3 (биты 1|2) -->
      <geom type="mesh" group="3" euler="1.5708 0 0" contype="1" conaffinity="3"/>
    </default>
  </default>
</default>

  <asset>
    <!-- Небо + пол -->
    <texture type="skybox" builtin="flat" rgb1="0 0 0" rgb2="0 0 0" width="512" height="3072"/>
    <texture type="2d" name="groundplane" builtin="checker" mark="edge"
             rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" markrgb="0.8 0.8 0.8"
             width="300" height="300"/>
    <material name="groundplane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.0"/>

    <!-- Стол: текстура/материалы -->
    <texture type="2d" name="table" file="table.png"/>
    <material name="table"      specular="0.3" shininess="0.5" rgba="0.62 0.62 0.6 1" texture="table"/>
    <material name="table_legs" specular="0.3" shininess="0.5" rgba="1 1 1 1"          texture="table"/>

    <!-- Стол: меши визуала (scale 0.8) -->
    <mesh name="table"       file="table.obj"        scale="0.8 0.8 0.8"/>
    <mesh name="table_legs"  file="table_legs.obj"   scale="0.8 0.8 0.8"/>

    <!-- Стол: меши коллизий (scale 0.8) -->
    <mesh name="table_collision_001" file="table_collision_001.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_002" file="table_collision_002.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_003" file="table_collision_003.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_004" file="table_collision_004.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_005" file="table_collision_005.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_006" file="table_collision_006.obj" scale="0.8 0.8 0.8"/>
    <mesh name="table_collision_007" file="table_collision_007.obj" scale="0.8 0.8 0.8"/>
  </asset>

  <worldbody>
    <!-- Освещение и пол -->
    <light pos="1 0 3.5" dir="0 0 -1" directional="true"/>
    <geom name="floor" size="0 0 0.05" type="plane" material="groundplane"/>

    <!-- Стол -->
    <body name="table_body" childclass="prop_table" pos="0.5 0 0.0" euler="0 0 -1.57">
      <!-- Визуал -->
      <geom name="table_mesh"      mesh="table"      class="prop_visual"   material="table"/>
      <geom name="table_mesh_legs" mesh="table_legs" class="prop_visual"   material="table_legs"/>
      <!-- Коллизии -->
      <geom name="table_col_001" mesh="table_collision_001" class="prop_collision"/>
      <geom name="table_col_002" mesh="table_collision_002" class="prop_collision"/>
      <geom name="table_col_003" mesh="table_collision_003" class="prop_collision"/>
      <geom name="table_col_004" mesh="table_collision_004" class="prop_collision"/>
      <geom name="table_col_005" mesh="table_collision_005" class="prop_collision"/>
      <geom name="table_col_006" mesh="table_collision_006" class="prop_collision"/>
      <geom name="table_col_007" mesh="table_collision_007" class="prop_collision"/>
    </body>

   
<body name="sphere" pos="0.4 0 0.85">
  <freejoint/>
  <geom name="sphere_geom" type="sphere" size="0.08"
        mass="0.01"
        rgba="1 1 1 1"
        contype="1" conaffinity="1" condim="3"  
        friction="2.0 0.1 0.2"
        solimp="0.95 0.99 0.001"
        solref="0.003 1"/>
</body>


    <body name="table_left" childclass="prop_table" pos="-0.3 -0.8 0.0" euler="0 0 -3.14">
      <geom name="table_left_mesh"      mesh="table"      class="prop_visual"   material="table"/>
      <geom name="table_left_legs"      mesh="table_legs" class="prop_visual"   material="table_legs"/>
      <geom name="table_left_col_001" mesh="table_collision_001" class="prop_collision"/>
      <geom name="table_left_col_002" mesh="table_collision_002" class="prop_collision"/>
      <geom name="table_left_col_003" mesh="table_collision_003" class="prop_collision"/>
      <geom name="table_left_col_004" mesh="table_collision_004" class="prop_collision"/>
      <geom name="table_left_col_005" mesh="table_collision_005" class="prop_collision"/>
      <geom name="table_left_col_006" mesh="table_collision_006" class="prop_collision"/>
      <geom name="table_left_col_007" mesh="table_collision_007" class="prop_collision"/>
    </body>

    <!-- Правый стол -->
    <body name="table_right" childclass="prop_table" pos="-0.3 0.8 0.0" euler="0 0 0">
      <geom name="table_right_mesh"      mesh="table"      class="prop_visual"   material="table"/>
      <geom name="table_right_legs"      mesh="table_legs" class="prop_visual"   material="table_legs"/>
      <geom name="table_right_col_001" mesh="table_collision_001" class="prop_collision"/>
      <geom name="table_right_col_002" mesh="table_collision_002" class="prop_collision"/>
      <geom name="table_right_col_003" mesh="table_collision_003" class="prop_collision"/>
      <geom name="table_right_col_004" mesh="table_collision_004" class="prop_collision"/>
      <geom name="table_right_col_005" mesh="table_collision_005" class="prop_collision"/>
      <geom name="table_right_col_006" mesh="table_collision_006" class="prop_collision"/>
      <geom name="table_right_col_007" mesh="table_collision_007" class="prop_collision"/>
    </body>
  </worldbody>
</mujoco>
